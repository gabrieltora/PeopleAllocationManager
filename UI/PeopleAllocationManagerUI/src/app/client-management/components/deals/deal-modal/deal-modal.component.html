<div class="modal-wrapper">
  <h1 mat-dialog-title *ngIf="!hasDealId">Adăugare Ofertă</h1>
  <h1 mat-dialog-title *ngIf="hasDealId">Editare Ofertă</h1>

  <div mat-dialog-content>
    <form [formGroup]="dealForm" class="form">


      <!-- Deal Title -->
      <mat-form-field>
        <input matInput formControlName="Title" placeholder="Titlu: " maxlength="50">
        <mat-error
          *ngIf="dealFormControls.Title.invalid && (dealFormControls.Title.dirty || dealFormControls.Title.touched)">
          <span *ngIf="dealFormControls.Title.errors.required">Introducerea titlului este
            obligatorie</span>
        </mat-error>
      </mat-form-field>

      <!-- Deal description -->
      <mat-form-field>
        <mat-label>Descriere: </mat-label>
        <textarea #message maxlength="512" matInput cdkTextareaAutosize
          formControlName="Description" placeholder="Detalii privind oferta" rows="5"></textarea>
        <mat-hint align="end">{{message.value.length}} / 512</mat-hint>
        <mat-error
          *ngIf="dealFormControls.Description.invalid && (dealFormControls.Description.dirty || dealFormControls.Description.touched)">
          <span *ngIf="dealFormControls.Description.errors.required">Introducerea descrierii este
            obligatorie</span>
        </mat-error>
      </mat-form-field>

      <!-- Deal Date -->
      <mat-form-field>
        <mat-label>Data</mat-label>
        <input matInput [max]="maxDate" [matDatepicker]="Date" formControlName="Date">
        <mat-datepicker-toggle matSuffix [for]="Date"></mat-datepicker-toggle>
        <mat-datepicker #Date></mat-datepicker>

        <mat-error
          *ngIf="dealFormControls.Date.invalid && (dealFormControls.Date.dirty || dealFormControls.Date.touched)">
          <span *ngIf="dealFormControls.Date.errors.required">
            Selectarea datei este obligatorie
          </span>
        </mat-error>
      </mat-form-field>


      <!-- Deal Title -->
      <mat-form-field>
        <input matInput formControlName="DealUrlLink" placeholder="Url ofertă: ">
      </mat-form-field>

      <!-- Client Status -->
      <!-- <mat-checkbox color="primary" formControlName="DealAccepted">Ofertă acceptată</mat-checkbox> -->

      <mat-form-field>
        <mat-label>Secteaza cererea</mat-label>
        <mat-select [(ngModel)]="selectedRequest" formControlName="RequestId" name="Request">
          <mat-option *ngFor="let request of clientRequests" [value]="request.requestId">
            {{request.title}} - {{request.date | date: 'fullDate'}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="selectedStatus" formControlName="Status" name="Status">
          <mat-option *ngFor="let status of statuses" [value]="status">
            {{status}}
          </mat-option>
        </mat-select>

        <mat-error
          *ngIf="dealFormControls.Status.invalid && (dealFormControls.Status.dirty || dealFormControls.Status.touched)">
          <span *ngIf="dealFormControls.Status.errors.required">Selectarea statusului este
            obligatorie!</span>
        </mat-error>
      </mat-form-field>

    </form>

  </div>
  <div mat-dialog-actions class="action-buttons">
    <button mat-button (click)="closeDialog()">Anulează</button>
    <button mat-button *ngIf="!hasDealId" (click)="addDeal()">Adaugă</button>
    <button mat-button *ngIf="hasDealId" (click)="updateDeal()">Salvează</button>
  </div>
</div>